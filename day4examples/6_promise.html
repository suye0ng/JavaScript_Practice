<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //XMLHttpRequest의 일반적인 비동기 동작 
        //서버로 요청을 보내고 서버의 응답 데이터를 이용해 구현하는 코드가 있는 경우 문제가 된다.
        function getData() {
            const xhr = new XMLHttpRequest(); 
            xhr.open("GET", "https://jsonplaceholder.typicode.com/posts/1"); 
            xhr.setRequestHeader("content-type", "application/json"); 
            xhr.send(); 

            xhr.onload = () => {
                if (xhr.status === 200) {
                const res = JSON.parse(xhr.response); 
                console.log(res);
                return res;
                } else {
                console.error(xhr.status, xhr.statusText); 
                return;
                }
            };
        }
        
        /* var res = getData(); 
        //이 시점에는 서버로 부터 응답이 오지 않은 시점이기 때문에 undefined
        console.log(res); 
        console.log("다음 코드를 실행합니다."); */

        //Promise를 사용하면 응답이 완료된 후 than 함수를 호출해 응답 데이터로 필요한 처리 가능
        
        // 서버 응답이 완료된 후 코드가 실행 됨
        
    </script>
</body>
</html>